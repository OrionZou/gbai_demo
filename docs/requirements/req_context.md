🔑 Agent 上下文管理器的关键功能

1. 会话状态管理
	•	用户对话历史：存储用户输入、Agent 输出，支持多轮查询。
	•	系统提示/角色信息：保存 Agent 的 system prompt、角色设定等。
	•	重置能力：支持 reset() 清空上下文，回到初始状态。

2. 记忆存取
	•	短期记忆：当前对话中的临时变量，例如本轮任务参数。
	•	长期记忆（可选）：和外部数据库/向量库结合，存储跨会话知识，支持检索。
	•	选择性持久化：将重要的对话片段保存下来（如总结、提炼关键词）。

3. 变量管理
	•	保存模板渲染所需的变量（例如用户 ID、任务参数、上下文实体）。
	•	提供接口 set_var/get_var/update_vars，便于渲染提示词时使用。
	•	支持 必填变量校验，避免模板缺值报错。

4. 上下文合并与裁剪
	•	控制上下文窗口长度（避免超过 LLM 的 token 限制）。
	•	提供裁剪策略：FIFO、按重要性、按主题聚类等。
	•	合并历史对话为摘要，用更少 token 保持记忆。

5. 外部资源挂载
	•	支持把外部知识（RAG 检索结果、工具调用结果）挂到上下文里。
	•	例如：context.attach("search_results", [...])，然后模板里可以用 {{ search_results }}。

6. 上下文版本/快照
	•	在执行关键步骤前，能保存上下文快照（checkpoint）。
	•	如果出错，可以 rollback() 恢复到某一快照。

7. 日志与可视化
	•	记录上下文的变化（便于调试）。
	•	提供接口导出上下文（例如 JSON 格式），用于 UI 或监控。
