# Agent Runtime Playground å®žçŽ°è®¡åˆ’

## é¡¹ç›®æ¦‚è¿°

ä¸º agent_runtime çš„ API åˆ›å»ºä¸€ä¸ªåŸºäºŽ Streamlit çš„å‰ç«¯ playgroundï¼Œæä¾›ç›´è§‚çš„ç•Œé¢æ¥æµ‹è¯•å’Œä½¿ç”¨ä»¥ä¸‹ä¸‰ä¸ªä¸»è¦ APIï¼š

1. **LLM é…ç½®ç®¡ç†** - GET/POST `/config`
2. **Reward API** - POST `/reward` (è¯­ä¹‰ä¸€è‡´æ€§æ¯”è¾ƒ)
3. **Backward API** - POST `/backward` (é—®ç­”å¯¹èšåˆå¤„ç†)

## æž¶æž„è®¾è®¡

```mermaid
graph TD
    A[main.py å…¥å£] --> B[agent_runtime_playground.py]
    B --> C[âš™ï¸ LLMé…ç½®é¡µé¢]
    B --> D[ðŸ† Reward APIé¡µé¢]
    B --> E[â†©ï¸ Backward APIé¡µé¢]
    
    C --> F[Agent Runtime API /config]
    D --> G[Agent Runtime API /reward]
    E --> H[Agent Runtime API /backward]
    
    F --> I[LLMé…ç½®ç®¡ç†]
    G --> J[è¯­ä¹‰ä¸€è‡´æ€§åˆ†æž]
    H --> K[çŸ¥è¯†èšåˆå¤„ç†]
```

## æ–‡ä»¶ç»“æž„

```
playground/
â”œâ”€â”€ agent_runtime_playground.py    # ä¸»è¦åŠŸèƒ½å®žçŽ°
â”œâ”€â”€ main.py                       # Streamlit å…¥å£æ–‡ä»¶
â”œâ”€â”€ pyproject.toml               # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ README.md                    # ä½¿ç”¨è¯´æ˜Ž
â””â”€â”€ implementation_plan.md       # æœ¬å®žçŽ°è®¡åˆ’
```

## åŠŸèƒ½è¯¦ç»†è®¾è®¡

### 1. LLM é…ç½®ç®¡ç†é¡µé¢ (âš™ï¸)

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- æ˜¾ç¤ºå½“å‰ LLM é…ç½®çŠ¶æ€
- æä¾›é…ç½®è¡¨å•ç•Œé¢
- æ”¯æŒé¢„è®¾é…ç½®æ¨¡æ¿ï¼ˆDeepSeekã€OpenAIç­‰ï¼‰
- å®žæ—¶é…ç½®éªŒè¯å’Œæ›´æ–°

**UI ç»„ä»¶ï¼š**
- API URL è¾“å…¥æ¡†ï¼ˆå¯é…ç½®ï¼‰
- é…ç½®çŠ¶æ€æ˜¾ç¤ºåŒºåŸŸ
- é…ç½®è¡¨å•ï¼ˆAPI Keyã€æ¨¡åž‹ã€Base URLã€è¶…æ—¶ç­‰ï¼‰
- é¢„è®¾æ¨¡æ¿é€‰æ‹©å™¨
- ä¿å­˜é…ç½®æŒ‰é’®

**API äº¤äº’ï¼š**
- GET `/config` - èŽ·å–å½“å‰é…ç½®
- POST `/config` - æ›´æ–°é…ç½®

### 2. Reward API æµ‹è¯•é¡µé¢ (ðŸ†)

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- è¯­ä¹‰ä¸€è‡´æ€§æ¯”è¾ƒæµ‹è¯•
- æ”¯æŒé¢„è®¾ç¤ºä¾‹å’Œè‡ªå®šä¹‰è¾“å…¥
- ç»“æžœå¯è§†åŒ–å±•ç¤º
- æµ‹è¯•åŽ†å²è®°å½•

**UI ç»„ä»¶ï¼š**
- é—®é¢˜è¾“å…¥æ¡†
- å€™é€‰ç­”æ¡ˆåˆ—è¡¨ç¼–è¾‘å™¨
- ç›®æ ‡ç­”æ¡ˆè¾“å…¥æ¡†
- é¢„è®¾ç¤ºä¾‹é€‰æ‹©å™¨
- ç»“æžœå±•ç¤ºåŒºåŸŸï¼ˆåˆ†æ•°ã€åˆ†æžç­‰ï¼‰
- æµ‹è¯•åŽ†å²

**API äº¤äº’ï¼š**
- POST `/reward` - æ‰§è¡Œè¯­ä¹‰æ¯”è¾ƒ

### 3. Backward API æµ‹è¯•é¡µé¢ (â†©ï¸)

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- é—®ç­”å¯¹æ‰¹é‡å¤„ç†
- ç« èŠ‚èšåˆç»“æžœå±•ç¤º
- OSPA æ ¼å¼æ•°æ®å¯¼å‡º
- å¤„ç†è¿‡ç¨‹å¯è§†åŒ–

**UI ç»„ä»¶ï¼š**
- é—®ç­”å¯¹è¾“å…¥ç•Œé¢ï¼ˆæ”¯æŒCSVä¸Šä¼ ï¼‰
- é¢å¤–æŒ‡ä»¤é…ç½®
- å¤„ç†ç»“æžœå±•ç¤ºï¼ˆç« èŠ‚ã€OSPAæ•°æ®ï¼‰
- ç»Ÿè®¡ä¿¡æ¯æ˜¾ç¤º
- ç»“æžœå¯¼å‡ºåŠŸèƒ½

**API äº¤äº’ï¼š**
- POST `/backward` - æ‰§è¡ŒçŸ¥è¯†èšåˆå¤„ç†

## æŠ€æœ¯å®žçŽ°è¦ç‚¹

### 1. çŠ¶æ€ç®¡ç†
- ä½¿ç”¨ `st.session_state` ç®¡ç† API URL é…ç½®
- ç¼“å­˜ LLM é…ç½®çŠ¶æ€
- ä¿æŒæµ‹è¯•åŽ†å²è®°å½•

### 2. é”™è¯¯å¤„ç†
- API è¿žæŽ¥çŠ¶æ€æ£€æŸ¥
- è¯¦ç»†é”™è¯¯ä¿¡æ¯æ˜¾ç¤º
- ä¼˜é›…çš„å¼‚å¸¸å¤„ç†

### 3. ç”¨æˆ·ä½“éªŒ
- å“åº”å¼å¸ƒå±€è®¾è®¡
- åŠ è½½çŠ¶æ€æŒ‡ç¤ºå™¨
- æ“ä½œç»“æžœåé¦ˆ
- æ•°æ®å¯è§†åŒ–å±•ç¤º

### 4. æ•°æ®æ ¼å¼å¤„ç†
- JSON æ•°æ®ç¾ŽåŒ–æ˜¾ç¤º
- CSV æ–‡ä»¶ä¸Šä¼ å’Œè§£æž
- ç»“æžœæ•°æ®å¯¼å‡º

## ä¾èµ–é¡¹

```toml
[project]
dependencies = [
    "streamlit>=1.43.1,<2.0.0",
    "requests>=2.32.3,<3.0.0", 
    "pandas>=2.0.0,<3.0.0",
    "pydantic>=2.10.6,<3.0.0"
]
```

## å¼€å‘æ­¥éª¤

1. âœ… åˆ†æž API ç»“æž„å’Œéœ€æ±‚
2. âœ… è®¾è®¡ç•Œé¢å¸ƒå±€å’Œæž¶æž„
3. ðŸ”„ åˆ›å»ºé¡¹ç›®é…ç½®æ–‡ä»¶
4. ðŸ”„ å®žçŽ°ä¸»å…¥å£æ–‡ä»¶
5. ðŸ”„ å®žçŽ° LLM é…ç½®ç®¡ç†åŠŸèƒ½
6. ðŸ”„ å®žçŽ° Reward API æµ‹è¯•åŠŸèƒ½
7. ðŸ”„ å®žçŽ° Backward API æµ‹è¯•åŠŸèƒ½
8. ðŸ”„ åˆ›å»ºä½¿ç”¨è¯´æ˜Žæ–‡æ¡£
9. ðŸ”„ å®Œæ•´åŠŸèƒ½æµ‹è¯•

## API ç«¯ç‚¹è¯´æ˜Ž

### Config API
- **GET /config** - èŽ·å–å½“å‰ LLM é…ç½®
- **POST /config** - æ›´æ–° LLM é…ç½®

### Reward API
- **POST /reward** - è¯­ä¹‰ä¸€è‡´æ€§æ¯”è¾ƒ
  - è¾“å…¥ï¼šé—®é¢˜ã€å€™é€‰ç­”æ¡ˆåˆ—è¡¨ã€ç›®æ ‡ç­”æ¡ˆ
  - è¾“å‡ºï¼šRewardResultï¼ˆåˆ†æ•°ã€åˆ†æžç­‰ï¼‰

### Backward API  
- **POST /backward** - é—®ç­”å¯¹èšåˆå¤„ç†
  - è¾“å…¥ï¼šé—®ç­”å¯¹åˆ—è¡¨ã€é¢å¤–æŒ‡ä»¤
  - è¾“å‡ºï¼šç« èŠ‚ç»“æž„ã€OSPAæ•°æ®ã€ç»Ÿè®¡ä¿¡æ¯

## ä½¿ç”¨åœºæ™¯

1. **å¼€å‘æµ‹è¯•** - API åŠŸèƒ½éªŒè¯å’Œè°ƒè¯•
2. **æ¼”ç¤ºå±•ç¤º** - äº§å“åŠŸèƒ½æ¼”ç¤º
3. **ç”¨æˆ·ä½“éªŒ** - éžæŠ€æœ¯ç”¨æˆ·çš„å‹å¥½ç•Œé¢
4. **æ•°æ®å¤„ç†** - æ‰¹é‡çŸ¥è¯†å¤„ç†å·¥å…·

è¿™ä¸ªè®¡åˆ’æä¾›äº†å®Œæ•´çš„å®žçŽ°è“å›¾ï¼Œç¡®ä¿æœ€ç»ˆäº§å“æ—¢åŠŸèƒ½å®Œæ•´åˆç”¨æˆ·å‹å¥½ã€‚